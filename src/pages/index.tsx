import type { NextPage } from "next";
import Head from "next/head";
import { useEffect, useState } from "react";
import styled from '@emotion/styled'
import { getOptionsForVote } from "../utils/getRandomPokemon";
import { trpc } from "../utils/trpc";
import Button from '@mui/material/Button';

const TitleContainer = styled.div`
  text-align: center;
`;
const ContentContainer = styled.div`
  display: flex;
  justify-content: center;
  column-gap: 1rem;
  div {
    text-align: center;
    height: 300px;
    display: flex;
    align-items: center;
    p {
      margin: 0 auto;
    }
  }
  .pokemon {
    display: flex;
  }
`;

const PokemonCard = styled.div`
  display: flex;
  flex-direction: column;
  img {
    height: 100%;
    object-fit: cover;
    object-position: center;
  }
`;

const Separator = styled.div<{ size: string }>`
  height: ${(props) => props.size};
  max-height: ${(props) => props.size};
`;

const Home: NextPage = () => {
  const [pokemonId, setPokemonId] = useState<Array<number>>([]);
  useEffect(() => {
    const data = getOptionsForVote();
    setPokemonId(data);
    return () => {};
  }, []);

  // if(pokemonId.length == 0) return <p>Loadings</p>;
  console.log(pokemonId.length)
  const pokemon1 = trpc.useQuery(["get-pokemons-by-id", { id: pokemonId[0] }]);
  const pokemon2 = trpc.useQuery(["get-pokemons-by-id", { id: pokemonId[1] }]);

  if (pokemon1.isLoading || pokemon2.isLoading) return null;

  return (
    <div>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        
      </Head>
      <main>

        <Separator size={"50px"} />
        <TitleContainer>
          <h1>Which is the cuitest pokemon?</h1>
        </TitleContainer>

        <Separator size={"100px"} />
        <ContentContainer>
          <PokemonCard>
            <img src={pokemon1.data?.sprites.front_default || undefined} />
            <h3>{pokemon1.data?.name.toUpperCase()}</h3>
            {/* <button>Vote</button> */}
            <Separator size={"50px"} />
            <Button variant="contained">Vote</Button>
          </PokemonCard>
          <div>
            <p>vs</p>
          </div>
          <PokemonCard>
            <img src={pokemon2.data?.sprites.front_default || undefined} />
            <h3>{pokemon2.data?.name.toUpperCase()}</h3>
            <Separator size={"50px"} />
            <Button variant="contained">Vote</Button>
          </PokemonCard>
        </ContentContainer>

      </main>
    </div>
  );
};

export default Home;
